# üß† Backend README (–¶–° –ü–ê–ü)

–¶–µ–ª—å: –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é backend-—á–∞—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¶–µ–Ω—Ç—Ä–∞ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–º—É –ê–Ω–∞–ª–∏–∑—É –ü–æ–≤–µ–¥–µ–Ω–∏—è.
–≠—Ç–æ—Ç README —Å–ª—É–∂–∏—Ç –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –≤—Å–µ—Ö –ª–æ–≥–∏–∫, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

- `auth/` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, JWT, —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- `ceu/` ‚Äî –ª–æ–≥–∏–∫–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å CEU-–±–∞–ª–ª–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ª–∏—Å—Ç–∏–Ω–≥, —Å—É–º–º–∞—Ä–Ω—ã–π —Ä–∞—Å—á—ë—Ç)
- `supervision/` ‚Äî –ª–æ–≥–∏–∫–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å —Å—É–ø–µ—Ä–≤–∏–∑–∏–µ–π (—Å–æ–∑–¥–∞–Ω–∏–µ, –ª–∏—Å—Ç–∏–Ω–≥, —Å—É–º–º–∞—Ä–Ω—ã–π —Ä–∞—Å—á—ë—Ç)
- `certificate/` ‚Äî –≤—ã–ø—É—Å–∫ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ (Prisma)

- `User` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- `CEURecord` + `CEUEntry` ‚Äî "–∑–∞–ø–∏—Å—å" –∏ "–∞—Ç–æ–º–∞—Ä–Ω–∞—è —Å—Ç—Ä–æ–∫–∞" CEU-–±–∞–ª–ª–æ–≤
- `SupervisionRecord` + `SupervisionHour` ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —á–∞—Å–æ–≤ —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏
- `Group` + `UserGroup` ‚Äî —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ò–µ—Ä–∞—Ä—Ö–∏—è —á–µ—Ä–µ–∑ `rank`)
- `Certificate` ‚Äî –≤—ã–¥–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

---

## üìú –°—Ç–∞—Ç—É—Å—ã –∑–∞–ø–∏—Å–µ–π (`RecordStatus`)

- `UNCONFIRMED` ‚Äî —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –æ–∂–∏–¥–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- `CONFIRMED` ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º / —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–º
- `REJECTED` ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞
- `SPENT` ‚Äî —É—á—Ç–µ–Ω–∞ –ø—Ä–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –±–æ–ª—å—à–µ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö

---

## ‚úÖ CEU-–ª–æ–≥–∏–∫–∞

### üîß –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤

```ts
app.post('/ceu/create', { preHandler: [verifyToken] }, createCeuHandler);
app.get('/ceu/list', { preHandler: [verifyToken] }, listCeuHandler);
app.get('/ceu/summary', { preHandler: [verifyToken] }, ceuSummaryHandler);
```

### POST `/ceu/create`

**Handler:** `createCeuHandler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ CEU-–∑–∞–ø–∏—Å–∏ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤.
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª, –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è, –¥–∞—Ç—É –∏ –º–∞—Å—Å–∏–≤ CEUEntry (–∫–∞—Ç–µ–≥–æ—Ä–∏—è + –∑–Ω–∞—á–µ–Ω–∏–µ). –í—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ `UNCONFIRMED`.

**–í–∞–ª–∏–¥–∞—Ü–∏—è:** `createCeuSchema` (Zod)

**–û—Ç–≤–µ—Ç:**

```json
{ "success": true, "ceuRecord": { ... } }
```

**–û—à–∏–±–∫–∏:**

- 400 ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

### GET `/ceu/list`

**Handler:** `listCeuHandler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π CEU –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ `CEUEntry`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.

**–û—Ç–≤–µ—Ç:**

```json
{ "records": [ { id, eventName, entries: [...] } ] }
```

---

### GET `/ceu/summary`

**Handler:** `CEUsummary.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Å—á—ë—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö (CONFIRMED) CEU-–±–∞–ª–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–∫–∂–µ –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–ª—è **—Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è**.

**–û—Ç–≤–µ—Ç:**

```json
{
  "required": { ethics, cultDiver, supervision, general } | null,
  "percent": { ethics, cultDiver, supervision, general } | null,
  "usable": { ethics, cultDiver, supervision, general }
}
```

**–õ–æ–≥–∏–∫–∞:**

- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **–∞–∫—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞** –ø–æ `UserGroup` —Å –Ω–∞–∏–≤—ã—Å—à–∏–º `rank`
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ `CEUEntry` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `CONFIRMED`
- –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω—è—è –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏, `required` –∏ `percent` = `null`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–∞–ª–ª–∞–º –ø–æ –≥—Ä—É–ø–ø–∞–º** –∑–∞—à–∏—Ç—ã –≤ `requirementsByGroup`

**–û—à–∏–±–∫–∏:**

- 401 ‚Äî –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- 404 ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## ‚úÖ Supervision-–ª–æ–≥–∏–∫–∞

### üîß –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤

```ts
app.post('/supervision/create', { preHandler: [verifyToken] }, createSupervisionHandler);
app.get('/supervision/list', { preHandler: [verifyToken] }, listSupervisionHandler);
app.get('/supervision/summary', { preHandler: [verifyToken] }, supervisionSummaryHandler);
```

### POST `/supervision/create`

**Handler:** `createSupervisionHandler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —á–∞—Å–æ–≤.
–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —á–∞—Å—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (INSTRUCTOR, CURATOR, SUPERVISOR). –í—Å–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ `UNCONFIRMED`.

**–í–∞–ª–∏–¥–∞—Ü–∏—è:** `createSupervisionSchema` (Zod)

**–û—Ç–≤–µ—Ç:**

```json
{ "success": true, "record": { ... } }
```

**–û—à–∏–±–∫–∏:**

- 400 ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

### GET `/supervision/list`

**Handler:** `listSupervisionHandler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —á–∞—Å–∞–º–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ `RecordStatus`.

**–û—Ç–≤–µ—Ç:**

```json
{ "records": [ { id, hours: [...] } ] }
```

---

### GET `/supervision/summary`

**Handler:** `supervisionSummaryHandler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Å—á—ë—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö (CONFIRMED) —á–∞—Å–æ–≤ —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥—Ä—É–ø–ø–µ.

**–û—Ç–≤–µ—Ç:**

```json
{
  "required": { instructor, curator, supervisor } | null,
  "percent": { instructor, curator, supervisor } | null,
  "usable": { instructor, curator, supervisor }
}
```

**–õ–æ–≥–∏–∫–∞:**

- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `rank`
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ —á–∞—Å—ã (`CONFIRMED`)
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º –∑–∞–¥–∞–Ω—ã –≤ `hourRequirementsByGroup`

**–û—à–∏–±–∫–∏:**

- 401 ‚Äî –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- 404 ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
